<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="https://www.myglamm.com/favicon.ico">
    <title>Buy SUPERFOODS Onion & Moringa Shampoo Online at Best Price - MyGlamm</title>
    <link rel="stylesheet" href="products.css">
    <link rel="stylesheet" href="../styles/main.css">
</head>
<body>
    <header></header>
    <script src="../javascript/header.js"></script>
    <script src="../javascript/connect.js"></script>
    <main id="mainImgDiv">
        <div id="img__container" class="image__container">
            <div id="image__slider"></div>
            <div id="image__onfocous"></div>
        </div>
        <div id="details__container" class="dtls__container">
    
        </div>
    </main>
    <footer></footer>
</body>
</html>
<script>
    let imgSlider = document.getElementById("image__slider");
    let imgOnFocuse = document.getElementById("image__onfocous")
    let detailsDiv = document.getElementById("details__container");


    let myProducts = localStorage.getItem('glamm_products');

    myProducts = JSON.parse(myProducts);

// Below is the funtion for showing product details

function showProductDetails() {
    
    myProducts.forEach(function(product, n) {
 
        if(n == 1) {

            let p_name = document.createElement('h2');
            p_name.setAttribute('class', 'product__name');
            p_name.innerText = product.name;

            let p_description = document.createElement('p');
            p_description.setAttribute('class', 'product__description');
            p_description.innerText = product.description;

            let rating = document.createElement('p');
            rating.setAttribute('class', 'rating');
            rating.innerText = product.rating;

            let rating_giver = document.createElement('p');
            rating_giver.setAttribute('class', 'rating__giver');
            rating_giver.innerText = `${product.ratings} ratings`;

            let p_price = document.createElement('p');
            p_price.innerText = 'â‚¹ ' + product.price;

            let btn = document.createElement('button');
            btn.setAttribute("class", "addtobag");
            btn.innerText = 'ADD TO BAG';
            btn.onclick = function () {
                addtoCart(product);
            }

            detailsDiv.append(p_name, p_description, rating, rating_giver, p_price, btn);
        }

    })
}
showProductDetails();


// Below is the function for displaying product images

function showProductImages() {
    
    myProducts.forEach(function(product, n) {
 
        if(n == 1) {

            let div = document.createElement('div');

            let image = document.createElement('img');
            image.src = product.imagesSmall[0];
            image.setAttribute("id","featured");
            let btn = document.createElement('button');
            btn.setAttribute("class", "addtobag");
            btn.innerText = 'ADD TO BAG';
            btn.onclick = function () {
                addtoCart(product);
            }

            imgOnFocuse.append(image);
        }

    })

}
showProductImages();



let pics = myProducts[1].imagesSmall;
console.log(pics);

console.log(pics);
let mainDiv = document.getElementById("mainImgDiv");
console.log(mainDiv);

let imageSlider = document.createElement("div");
let featuredImg = document.getElementById("featured");
let rightImgSlide = document.createElement("img");
let leftImgSlide = document.createElement("img");
imageSliderIn = document.createElement("div");
imageSliderIn.setAttribute("id","slider");
leftImgSlide.src = "https://www.myglamm.com/images/slickArrowLeft.svg";
rightImgSlide.src = "https://www.myglamm.com/images/slickArrowRight.svg";

rightImgSlide.setAttribute("id","rtSlide");
leftImgSlide.setAttribute("id","ltSlide");

//leftImgSlide.addEventListener("click",)
imageSlider.append(leftImgSlide);
imageSlider.style.maxWidth = "500px";
imageSliderIn.style.maxWidth = "280px";

imageSliderIn.style.display = "flex";

 imageSlider.style.display = "flex";
imageSliderIn.style.overflowX = "hidden";







//thumbnail.setAttribute();
let picture = document.createElement("img");
picture.setAttribute("class", "thumbnails");
picture.setAttribute("class","active");
picture.src = pics[0];
picture.style.width = "100px";
picture.style.height = "100px";

picture.style.margin = "5px";
picture.addEventListener("mouseover", function(){
     featuredImg.src = picture.src;
})

imageSliderIn.append(picture);
console.log(imageSliderIn);

let picture2 = document.createElement("img");
picture2.setAttribute("class", "thumbnails");
picture2.setAttribute("class","active");
picture2.src = pics[1];
picture2.style.width = "100px";


picture2.style.height = "100px";
picture2.style.margin = "5px";
picture2.addEventListener("mouseover", function(){
     featuredImg.src = picture2.src;
})
imageSliderIn.append(picture2);
console.log(imageSliderIn);



let picture3 = document.createElement("img");
picture3.setAttribute("class", "thumbnails");
picture3.setAttribute("class","active");
picture3.src = pics[2];
picture3.style.width = "100px";
picture3.style.height = "100px";

picture3.style.margin = "5px";
picture3.addEventListener("mouseover", function(){
     featuredImg.src = picture3.src;
})

imageSliderIn.append(picture3);
console.log(imageSliderIn);


let picture4 = document.createElement("img");
picture4.setAttribute("class", "thumbnails");
picture4.setAttribute("class","active");
picture4.src = pics[3];
picture4.style.width = "100px";
picture4.style.height = "100px";

picture4.style.margin = "5px";
picture4.addEventListener("mouseover", function(){
     featuredImg.src = picture4.src;
})

imageSliderIn.append(picture4);

console.log(imageSliderIn);

let picture5 = document.createElement("img");
picture5.setAttribute("class", "thumbnails");
picture5.setAttribute("class","active");
picture5.src = pics[4];
picture5.style.width = "100px";
picture5.style.height = "100px";

picture5.style.margin = "5px";
picture5.addEventListener("mouseover", function(){
     featuredImg.src = picture5.src;
})
imageSliderIn.append(picture5);


imageSlider.append(imageSliderIn);
console.log(imageSlider);

imageSlider.append(rightImgSlide);
console.log(imageSlider);

mainDiv.append(imageSlider);



let rightClick = document.getElementById("rtSlide");
let leftClick = document.getElementById("ltSlide");


rightClick.addEventListener("click",function(){
       document.getElementById("slider").scrollLeft += 180
})

leftClick.addEventListener("click",function(){
       document.getElementById("slider").scrollLeft -= 180
})







// Below is the function for add to bag


if(localStorage.getItem("glammBag") === null) {
    localStorage.setItem("glammBag", JSON.stringify([]));
}

let Flag = JSON.parse(localStorage.getItem('flag'));

let user = localStorage.getItem("glammUsers");
user = JSON.parse(user)

let check = [];

function addtoCart(p) {

    let cart_data = JSON.parse(localStorage.getItem("glammBag"));



    if(check.includes(p.name) == true) {
        alert("Product is Already in The Cart.");

        if (Flag != null) {

            user.forEach(function(ele) {

                if(ele.mobile == Flag) {
    
                    for(let i = 0; i < ele.cart.length; i++) {
                        if(ele.cart[i].name === p.name) {
                            +ele.cart[i].quantity++;
                        }
                    }
                }
            })
        } else {

            for(let i = 0; i < cart_data.length; i++) {
                if(cart_data[i].name === p.name) {
                    +cart_data[i].quantity++;
                }
            }
        }


    } else {
        check.push(p.name)
        p.quantity = 1;

        if(Flag != null) {

            user.forEach(function(ele) {

                if(ele.mobile == Flag) {

                    ele.cart.push(p)

                }
            })
        } else {

            cart_data.push(p);
        }
    }

    if(Flag != null) {

        localStorage.setItem("glammUsers", JSON.stringify(user));
    } else {

        localStorage.setItem("glammBag", JSON.stringify(cart_data));
    }
}
</script>